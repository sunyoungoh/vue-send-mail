(function(e){function t(t){for(var s,o,l=t[0],n=t[1],d=t[2],u=0,m=[];u<l.length;u++)o=l[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);c&&c(t);while(m.length)m.shift()();return i.push.apply(i,d||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],s=!0,l=1;l<r.length;l++){var n=r[l];0!==a[n]&&(s=!1)}s&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var s={},a={app:0},i=[];function o(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=s,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(r,s,function(t){return e[t]}.bind(null,s));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vue-send-mail/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var c=n;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"099c":function(e,t,r){},4639:function(e,t,r){"use strict";r("6b67")},"56d7":function(e,t,r){"use strict";r.r(t);var s=r("2b0e"),a=r("7496"),i=r("62ad"),o=r("553a"),l=r("f6c4"),n=function(){var e=this,t=e._self._c;return t(a["a"],[t(l["a"],[t("router-view")],1),t(o["a"],{attrs:{padless:""}},[t(i["a"],{staticClass:"text-center text-caption grey--text",attrs:{cols:"12"}},[e._v(" © 2022 SunYoungOh. All right reserved. ")])],1)],1)},d=[],c={name:"App"},u=c,m=(r("4639"),r("2877")),p=Object(m["a"])(u,n,d,!1,null,null,null),h=p.exports,v=r("8c4f"),f=r("132d"),g=r("71a3"),b=r("c671"),_=r("fe57"),O=r("aac8"),y=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("div",{staticClass:"logo py-5 ma-auto text-center green"},[t("h3",{staticClass:"logo-text white--text"},[t(f["a"],{staticClass:"mr-1 mb-1",attrs:{size:"22",color:"white"}},[e._v(" mdi-email ")]),e._v("SENDMAIL ")],1)]),t("div",{staticClass:"tabs-container"},[t(_["a"],{attrs:{ripple:!1,"background-color":"transparent",color:"green",height:"56",grow:"","show-arrows":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(r,s){return t(g["a"],{key:s,attrs:{"active-class":"font-weight-bold",ripple:!1},on:{click:function(t){return e.$store.commit("setOrderType",r.value)}}},[e._v(" "+e._s(r.text)+" ")])})),1),t(O["a"],{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(b["a"],[t("NewOrderList")],1),t(b["a"],[t("OrderMailForm")],1),t(b["a"],[t("OrderMailForm")],1),t(b["a"],[t("SelectFileMailForm")],1)],1)],1)])},I=[],x=r("8336"),w=r("4bd4"),k=r("a844"),M=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-container"},[t(w["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(x["a"],{staticClass:"mt-1 mb-2",attrs:{color:"primary",block:"",large:"",elevation:"0"},on:{click:function(t){e.dialog=!0}}},[e._v(" 상품 추가하기 ")]),t("p",{staticClass:"error--text text-center text-caption"},[e._v(e._s(e.errorMsg))]),t("SelectFileDialog",{attrs:{dialog:e.dialog},on:{"update:seletedItem":e.addSelectedItem,"update:dialog":t=>e.dialog=t}}),e.selectedItem?e._l(e.orderDetail,(function(e,r){return t("OrderChip",{key:r,attrs:{order:e}})})):e._e(),t("EmailInputField",{attrs:{valid:e.valid},on:{click:e.resetSendResult},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(k["a"],{attrs:{name:"comment",label:"코멘트","auto-grow":"",rows:"1",clearable:""},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),t("SendBtns",{attrs:{email:e.email,"order-detail":e.selectedItem,comment:e.comment,valid:e.valid},on:{"update:sendResult":t=>e.sendResult=t,"update:errorMsg":e.setErrorMsg,"validate-form":e.validateForm,"reset-form":e.resetForm}})],2),""!==e.sendResult?t("ResultAlert",{staticClass:"pt-6",attrs:{result:e.sendResult}}):e._e()],1)},D=[];r("14d9");const S=[{itemId:6175018692,itemName:"2023 심플 플래너",itemOptionLabel:"컬러",itemOptions:[{label:"컬러",value:["라이트","인디핑크","스카이블루","다크"]}]},{itemId:6173761992,itemName:"2023 모던 플래너",itemOptionLabel:"컬러",itemOptions:[{label:"컬러",value:["화이트","다크"]}]},{itemId:7551229680,itemName:"2023 타임라인 플래너",itemOptions:[{label:"위클리타입",value:["스케줄","타임테이블"]}]},{itemId:6230373650,itemName:"2023 먼슬리&데일리 플래너",itemOptions:[{label:"컬러",value:["화이트","다크"]},{label:"시작요일",value:["일요일시작","월요일시작"]},{label:"데일리타입",value:["스케줄","타임테이블"]}]},{itemId:6183672844,itemName:"31DAYS 플래너",itemOptions:[{label:"컬러",value:["화이트","다크"]},{label:"데일리타입",value:["스케줄","타임테이블"]}]},{itemId:6339448390,itemName:"3년 5년 다이어리",itemOptions:[{label:"연도",value:["3년","5년"]},{label:"컬러",value:["화이트","다크"]}]},{itemId:7674508068,itemName:"레시피북",itemOptions:[{label:"컬러",value:["크림","올리브","토스트","차콜"]}]},{itemId:6668700804,itemName:"세로형 인덱스 노트",itemOptions:[{label:"컬러",value:["화이트","다크","화이트+다크"]}]},{itemId:6711856094,itemName:"가로형 인덱스 노트",itemOptions:[{label:"컬러",value:["화이트","다크","화이트+다크"]}]},{itemId:6907619722,itemName:"독서노트",itemOptions:[{label:"컬러",value:["화이트","다크"]}]},{itemId:7118280906,itemName:"드라마노트",itemOptions:[{label:"컬러",value:["화이트","다크"]}]},{itemId:6390846551,itemName:"먼슬리 트래커북",itemOptions:[{label:"컬러",value:["차콜","캔디핑크","스카이블루"]}]},{itemId:6293308097,itemName:"180 베이직 노트",itemOption:[""]},{itemId:6498685859,itemName:"180 체커보드 노트",itemOption:[""]}];var E=r("8654"),R=function(){var e=this,t=e._self._c;return t(E["a"],{ref:"email",attrs:{value:e.value,rules:e.emailRules,label:"이메일",hint:"아이디만 입력시 자동으로 @naver.com 가 추가됩니다.",required:""},on:{click:e.reset,input:function(t){return e.$emit("input",t)},blur:e.addNaverDomain}})},C=[],$={name:"EmailInputField",props:{value:{type:String}},data:()=>({emailRules:[e=>!!e||"이메일을 입력해주세요.",e=>/.+@.+\..+/.test(e)||"이메일 형식으로 입력해주세요"]}),methods:{reset(){this.$refs.email.resetValidation(),this.$emit("resetSendResult")},addNaverDomain(e){let t=e.target.value;t&&-1==t.indexOf("@")&&(t+="@naver.com",this.$refs.email.resetValidation()),this.$emit("input",t)}}},N=$,F=Object(m["a"])(N,R,C,!1,null,null,null),j=F.exports,A=r("b0af"),T=r("99d9"),L=r("169a"),B=r("b974"),P=r("2fa4"),Y=function(){var e=this,t=e._self._c;return t(w["a"],{ref:"dialogForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(L["a"],{attrs:{persistent:"","max-width":"400px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(A["a"],[t(T["c"],{staticClass:"pb-5"},[e._v("상품 추가하기")]),t(T["b"],[t(B["a"],{ref:"selectItem",attrs:{items:e.items,"item-text":"itemName","item-value":"itemId",rules:[e=>!!e||"상품을 선택해주세요."],label:"상품명",required:""},on:{change:e.resetSelectOption},model:{value:e.selectItem,callback:function(t){e.selectItem=t},expression:"selectItem"}}),e._l(e.options.itemOptions,(function(r,s){return t(B["a"],{key:s,ref:"itemOptions",refInFor:!0,attrs:{items:r.value,rules:[e=>!!e||"옵션을 선택해주세요."],label:r.label,required:""},model:{value:e.selectOption[s],callback:function(t){e.$set(e.selectOption,s,t)},expression:"selectOption[i]"}})}))],2),t(T["a"],[t(P["a"]),t(x["a"],{attrs:{color:"grey darken-1",text:""},on:{click:e.closeDialog}},[e._v(" 닫기 ")]),t(x["a"],{attrs:{color:"green darken-1",text:""},on:{click:e.addItem}},[e._v(" 추가하기 ")])],1)],1)],1)],1)},V=[],q={props:{dialog:{type:Boolean,default:!1}},data:()=>({items:S,selectItem:"",selectOption:[],valid:!0}),computed:{options(){const e=this.selectItem?this.items.filter(e=>e.itemId==this.selectItem)[0]:[{itemOption:"",itemOptionLabel:"상품옵션"}];return e}},methods:{resetSelectBox(){this.selectItem="",this.selectOption=[],this.$refs.selectItem.resetValidation()},closeDialog(){this.resetSelectBox(),this.$emit("update:dialog",!1)},addItem(){this.$refs.dialogForm.validate(),this.selectItem&&this.selectOption[0]&&(this.$emit("update:seletedItem",{itemId:this.selectItem,itemOption:this.selectOption.join(",")}),this.resetSelectBox(),this.$emit("update:dialog",!1))},resetSelectOption(){if(this.$refs.itemOptions)for(let e=0;e<this.$refs.itemOptions.length;e++)this.$refs.itemOptions[e].reset();this.selectOption=[]}}},z=q,H=Object(m["a"])(z,Y,V,!1,null,null,null),G=H.exports,J=r("8212"),U=r("cc20"),W=function(){var e=this,t=e._self._c;return t("div",["none"==e.$store.state.orderType?e._l(e.orderDetail,(function(r,s){return t(U["a"],{key:s,staticClass:"my-2 mr-2 px-2",attrs:{color:"primary",label:"",outlined:"",close:""},on:{"click:close":function(t){return e.removeItem(s)}}},[t("span",[e._v(" "+e._s(e._f("itemName")(r.itemId))+" "+e._s(e._f("roundBraket")(r.itemOption))+" ")])])})):[t(U["a"],{staticClass:"my-2 mr-2 px-2",attrs:{color:"primary",label:"",outlined:""},on:{click:function(t){return e.$emit("open-detail",e.order.productOrderId)}}},[t(J["a"],{staticClass:"mr-0",attrs:{left:""}},[t(f["a"],{attrs:{small:""}},[e._v("mdi-link-variant")])],1),t("span",[e._v(" "+e._s(e._f("itemName")(e.order.itemId))+" "+e._s(e._f("roundBraket")(e.order.itemOption))+" ")])],1)]],2)},X=[],K={props:{order:{type:Object}},data(){return{chip:!0}},methods:{removeItem(e){this.orderDetail.splice(e,1),this.$emit("update:seletedItem")}},filters:{roundBraket(e){return e?`(${e})`:""},itemName(e){switch(e){case 6175018692:return"2023 심플 플래너";case 6173761992:return"2023 모던 플래너";case 7551229680:return"2023 타임라인 플래너";case 6230373650:return"2023 먼슬리&데일리 플래너";case 6183672844:return"31DAYS 플래너";case 6339448390:return"3년 5년 다이어리";case 6668700804:return"세로형 인덱스 노트";case 6711856094:return"가로형 인덱스 노트";case 6907619722:return"독서노트";case 7118280906:return"드라마노트";case 6390846551:return"먼슬리 트래커북";case 6293308097:return"180 베이직 노트";case 6498685859:return"180 체커보드 노트";case 7674508068:return"레시피북";default:return""}}}},Q=K,Z=Object(m["a"])(Q,W,X,!1,null,null,null),ee=Z.exports,te=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mt-6 d-flex justify-space-between"},[t(x["a"],{attrs:{disabled:!e.valid||e.loading,loading:e.loading,width:"250",color:"green white--text",elevation:"0","x-large":""},on:{click:e.sendMail},scopedSlots:e._u([{key:"loader",fn:function(){return[t("span",[e._v(e._s(e.loadingText))])]},proxy:!0}])},[e._v(" 메일 보내기 ")]),t(x["a"],{attrs:{color:"grey",width:"110","x-large":"",outlined:""},on:{click:e.resetForm}},[e._v(" 모두 지우기 ")])],1)},re=[],se=(r("5b81"),{props:{email:{type:String,default:""},orderId:{type:String,default:""},orderDetail:{type:[Object,Array],require:!0},comment:{type:String,default:""},valid:{type:Boolean,default:!0}},data(){return{loading:!1,loadingText:""}},computed:{mailData(){return{store:"영로그",items:this.orderDetail,toEmail:this.email,comment:this.comment.replaceAll("\n","<br/>")}}},methods:{async sendMail(){if(this.$emit("update:sendResult",""),this.$emit("validate-form"),this.orderDetail[0]||this.$emit("update:errorMsg"),this.email&&this.orderDetail[0]){this.loading=!0,this.loadingText="메일 발송 중...";const e=await this.$store.dispatch("sendMail",this.mailData);if(this.$emit("update:sendResult",e),this.orderId&&"success"==e){const e=await this.dispatchOrder();this.$emit("update:dispatchResult",e)}this.loading=!1}},async dispatchOrder(){this.loadingText="송장 등록 중...";let e="";return"single"==this.$store.state.orderType?e=await this.$store.dispatch("dispatchOrder",this.orderId):"multiple"==this.$store.state.orderType&&(e=await Promise.all(this.orderDetail.map(async e=>this.$store.dispatch("dispatchOrder",e.productOrderId))),e=e.every(e=>"success"==e)?"success":"error"),e},resetForm(){this.$emit("reset-form")}}}),ae=se,ie=Object(m["a"])(ae,te,re,!1,null,"349d2067",null),oe=ie.exports,le=r("0798"),ne=function(){var e=this,t=e._self._c;return t(le["a"],{attrs:{type:e.result,text:""}},["success"==e.result?t("span",[e._t("success",(function(){return[e._v(" 메일을 "),t("strong",[e._v("성공적")]),e._v("으로 보냈습니다. ")]}))],2):t("span",[e._t("error",(function(){return[e._v(" 메일 전송을 "),t("strong",[e._v("실패")]),e._v("하였습니다. ")]}))],2)])},de=[],ce={props:{result:{type:String,default:""}}},ue=ce,me=Object(m["a"])(ue,ne,de,!1,null,null,null),pe=me.exports,he={name:"MailForm",components:{SelectFileDialog:G,EmailInputField:j,OrderChip:ee,SendBtns:oe,ResultAlert:pe},data:()=>({email:"",selectedItem:[],comment:"",sendResult:"",errorMsg:"",items:S,valid:!0,dialog:!1}),methods:{setErrorMsg(){this.errorMsg="상품을 추가해주세요"},resetErrorMsg(){this.errorMsg=""},addSelectedItem(e){this.selectedItem.push(e),this.resetErrorMsg()},removeSelectedItem(e){this.selectedItem=this.selectedItem.splice(e,1)},validateForm(){this.$refs.form.validate()},resetSendResult(){this.sendResult=""},resetForm(){this.resetErrorMsg(),this.resetSendResult(),this.selectedItem=[],this.email="",this.comment="",this.$refs.form.reset()}}},ve=he,fe=Object(m["a"])(ve,M,D,!1,null,"8bdb3c3a",null),ge=fe.exports,be=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-container"},[t(w["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("div",{staticClass:"order-id-wrap"},[t(E["a"],{ref:"orderId",attrs:{label:e.label,rules:[e=>!!e||this.label+"를 조회해주세요."],"error-messages":e.errorMsg,required:""},on:{click:e.resetErrorMsg},model:{value:e.orderId,callback:function(t){e.orderId=t},expression:"orderId"}}),t(x["a"],{staticClass:"ml-4 mb-2",attrs:{width:"80",disabled:e.loading,loading:e.loading,color:"primary white--text",elevation:"0"},on:{click:e.getOrderInfo},scopedSlots:e._u([{key:"loader",fn:function(){return[t("span",[e._v("조회중...")])]},proxy:!0}])},[e._v("조회하기 ")])],1),e.orderDetail?e._l(e.orderDetail,(function(r,s){return t("OrderChip",{key:s,attrs:{order:r.items},nativeOn:{click:function(t){return e.openOrderDetail(s)}}})})):e._e(),e.shippingMemo?t(le["a"],{staticClass:"text-subtitle-2 mb-6",attrs:{border:"left","colored-border":"",color:"primary",elevation:"2"}},[e._v(" ✍🏻 "+e._s(e.shippingMemo)+" ")]):e._e(),t("EmailInputField",{attrs:{valid:e.valid},on:{click:e.resetResults},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(k["a"],{attrs:{name:"comment",label:"코멘트","auto-grow":"",rows:"1",clearable:""},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),t("SendBtns",{attrs:{email:e.email,"order-id":e.orderId,"order-detail":e.orderDetail,comment:e.comment,valid:e.valid},on:{"update:sendResult":t=>e.sendResult=t,"update:dispatchResult":t=>e.dispatchResult=t,"update:errorMsg":e.setErrorMsg,"validate-form":e.validateForm,"reset-form":e.resetForm}})],2),""!==e.sendResult?t("ResultAlert",{staticClass:"pt-6",attrs:{result:e.sendResult}}):e._e(),""!==e.dispatchResult?t("ResultAlert",{attrs:{result:e.dispatchResult},scopedSlots:e._u([{key:"success",fn:function(){return[e._v(" 송장을 "),t("strong",[e._v("성공적")]),e._v("으로 등록했습니다. ")]},proxy:!0},{key:"error",fn:function(){return[e._v(" 송장 등록을 "),t("strong",[e._v("실패")]),e._v("하였습니다. ")]},proxy:!0}],null,!1,823311819)}):e._e()],1)},_e=[],Oe={name:"OrderMailForm",components:{EmailInputField:j,OrderChip:ee,SendBtns:oe,ResultAlert:pe},data:()=>({email:"",orderId:"",orderDetail:[],comment:"",sendResult:"",dispatchResult:"",valid:!0,loading:!1,errorMsg:"",shippingMemo:""}),computed:{label(){return"single"==this.orderType?"상품주문번호":"주문번호"},shippingMemoEmail(){const e=/\S+@+\S+\.+\S{3}/,t=this.orderDetail[0].shippingMemo.match(e)[0];return t}},methods:{openOrderDetail(e){window.open(`https://sell.smartstore.naver.com/o/v3/manage/order/popup/${this.orderDetail[e].productOrderId}/productOrderDetail`,"_blank")},setErrorMsg(){this.errorMsg=this.label+"를 조회해주세요."},resetErrorMsg(){this.$refs.orderId.resetValidation(),this.errorMsg=""},async getOrderInfo(){if(this.resetResults(),this.orderId){this.loading=!0;try{var e,t;if("single"==this.$store.state.orderType?this.orderDetail=await this.$store.dispatch("getOrderDetail",this.orderId):this.orderDetail=await this.$store.dispatch("getOrders",this.orderId),null!==(e=this.orderDetail[0])&&void 0!==e&&e.shippingMemo)this.shippingMemo=null===(t=this.orderDetail[0])||void 0===t?void 0:t.shippingMemo,this.email=this.shippingMemoEmail;this.resetErrorMsg()}catch(r){400==r.response.status&&(this.errorMsg=r.response.data,this.orderDetail=[])}finally{this.loading=!1}}else this.setErrorMsg()},validateForm(){this.$refs.form.validate()},resetResults(){this.sendResult="",this.dispatchResult=""},resetForm(){this.resetErrorMsg(),this.resetResults(),this.orderId="",this.orderDetail=[],this.email="",this.comment="",this.$refs.form.reset()}}},ye=Oe,Ie=Object(m["a"])(ye,be,_e,!1,null,"fb543ccc",null),xe=Ie.exports,we=r("a523"),ke=r("490a"),Me=function(){var e=this,t=e._self._c;return t(we["a"],{staticClass:"pt-8 px-4"},[e.loading?t("div",{staticClass:"text-center mt-16"},[t(ke["a"],{attrs:{size:50,color:"green",indeterminate:""}})],1):[e.orderList.length?t("div",{staticClass:"pb-4 order-list"},e._l(e.orderList,(function(e,r){return t("OrderItem",{key:r,attrs:{order:e}})})),1):t("div",[t("h3",{staticClass:"text-center mt-16 grey--text text--darken-3"},[e._v(" 신규 주문이 없습니다. ")])])]],2)},De=[],Se=(r("13d5"),r("ce7e")),Ee=r("8e36"),Re=function(){var e=this,t=e._self._c;return t("div",{staticClass:"order-item"},[t(A["a"],{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"mb-6 mx-auto",attrs:{"max-width":"500",elevation:"7"}},[t(T["c"],{staticClass:"text-body-1 py-3 px-4 font-weight-bold"},[e._v(" 주문서 ")]),t(Se["a"]),t("div",{staticClass:"pa-4 text-body-2"},[t("div",{staticClass:"orderInfo"},[t("p",[e._v(" 🔖 주문번호 : "),t("span",{staticClass:"font-weight-medium"},[e._v(" "+e._s(e.order.orderId))])]),t("p",[e._v(" ⏰ 결제일시 : "),t("span",{staticClass:"font-weight-medium"},[e._v(e._s(e._f("timeFormat")(e.order.paymentDate)))])]),t("p",[e._v(" 👩🏻‍💻 구매자 : "),t("span",{staticClass:"text-no-wrap yellow font-weight-medium"},[e._v(" "+e._s(e.order.ordererName)+" ("+e._s(e.order.ordererId)+") ")])]),e.shippingMemo?t("p",[e._v(" ✍🏻 배송메모 : "),t("span",{staticClass:"yellow font-weight-medium"},[e._v(" "+e._s(e.shippingMemo)+" ")])]):e._e()]),e._l(e.order.items,(function(r,s){return t("OrderChip",{key:s,attrs:{order:r},nativeOn:{click:function(t){return e.openOrderDetail(s)}}})})),t("EmailInputField",{staticClass:"mt-3",model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],2),t(Ee["a"],{attrs:{active:e.loading,indeterminate:e.loading,absolute:"",top:"",color:"green",height:"5"}}),t(T["a"],{staticClass:"pb-4 px-4"},[t(P["a"]),t(x["a"],{attrs:{color:"green",width:"100",elevation:"0",dark:""},on:{click:e.sendMail}},[e._v(" 메일 보내기 ")])],1)],1),t("SnackBar",{attrs:{result:e.sendResult}}),t("SnackBar",{attrs:{result:e.dispatchResult},scopedSlots:e._u([{key:"success",fn:function(){return[e._v(" 송장을 "),t("strong",[e._v("성공적")]),e._v("으로 등록했습니다. ")]},proxy:!0},{key:"error",fn:function(){return[e._v(" 송장 등록을 "),t("strong",[e._v("실패")]),e._v("하였습니다. ")]},proxy:!0}])})],1)},Ce=[],$e=r("2db4"),Ne=function(){var e=this,t=e._self._c;return t($e["a"],{staticClass:"mb-6",attrs:{value:""!==e.result,color:e.color,timeout:"3000",bottom:"",elevation:"24"}},["success"==e.result?t("span",[e._t("success",(function(){return[e._v(" 메일을 "),t("strong",[e._v("성공적")]),e._v("으로 보냈습니다. ")]}))],2):t("span",[e._t("error",(function(){return[e._v(" 메일 전송을 "),t("strong",[e._v("실패")]),e._v("하였습니다. ")]}))],2)])},Fe=[],je={props:{result:{type:String,default:""}},computed:{color(){return"success"==this.result?"green":"error"}}},Ae=je,Te=Object(m["a"])(Ae,Ne,Fe,!1,null,null,null),Le=Te.exports,Be={components:{OrderChip:ee,EmailInputField:j,SnackBar:Le},mounted(){this.setEmail()},data(){return{loading:!1,show:!0,sendResult:"",dispatchResult:"",email:""}},props:{order:{type:Object}},computed:{shippingMemo(){return this.order.shippingMemo},mailData(){return{store:"영로그",items:this.order.items,toEmail:this.email}}},methods:{setEmail(){this.email=this.shippingMemo?this.extractEmail(this.shippingMemo):""},extractEmail(e){const t=/\S+@+\S+\.+\S{3}/,r=e.match(t)[0];return r},openOrderDetail(e){console.log(this.order.items[e].productOrderId),window.open(`https://sell.smartstore.naver.com/o/v3/manage/order/popup/${this.order.items[e].productOrderId}/productOrderDetail`,"_blank")},async sendMail(){if(this.mailData.toEmail){this.loading=!0;const e=await this.$store.dispatch("sendMail",this.mailData);if(console.log("sendResult",e),"success"==e){this.sendResult="success";const e=await this.dispatchOrder();this.dispatchResult=e,setTimeout(()=>{this.show=!1},3e3)}else this.sendResult="error",this.loading=!1}},async dispatchOrder(){let e="";return 1==this.order.items.length?e=await this.$store.dispatch("dispatchOrder",this.order.items[0].productOrderId):(e=await Promise.all(this.order.items.map(async e=>this.$store.dispatch("dispatchOrder",e.productOrderId))),e=e.every(e=>"success"==e)?"success":"error"),this.loading=!1,e}},filters:{timeFormat(e){const t=new Date(e);return t.toLocaleString("ja-JP",{year:"2-digit",month:"2-digit",day:"2-digit",hourCycle:"h23",hour:"2-digit",minute:"2-digit"})},orderStatus(e){switch(e){case"AYMENT_WAITING":return"결제대기";case"PAYED":return"결제완료";case"DELIVERING":return"배송중";case"DELIVERED":return"배송완료";case"PURCHASE_DECIDED":return"결제대기";case"EXCHANGED":return"교환";case"CANCELED":return"취소";case"RETURNED":return"반품";case"CANCELED_BY_NOPAYMENT":return"미결제취소";case"DELIVERY_ADDRESS_CHANGED":return"주소변경"}}}},Pe=Be,Ye=(r("8330"),Object(m["a"])(Pe,Re,Ce,!1,null,"40086411",null)),Ve=Ye.exports,qe=r("cee4");function ze(){return qe["a"].create({baseURL:"https://send-mail-server-sunyoungoh.koyeb.app"})}const He=ze(),Ge=()=>He.get("/naver/orders"),Je=e=>He.get("/naver/orders/"+e),Ue=e=>He.get("/naver/detail",{params:{productOrderId:e}}),We=e=>He.post("/naver/"+e);var Xe={components:{OrderItem:Ve},mounted(){this.fetchNewOrder()},data(){return{loading:!1,orderList:[]}},methods:{async fetchNewOrder(){this.loading=!0;const{data:e}=await Ge(),t=e;if(t.length){const e=t.map(e=>e.productOrderId);let a=await Ue(e);a=a.data;var r=a.reduce((e,t)=>(e[t.orderId]=e[t.orderId]||[],e[t.orderId].push(t),e),{}),s=Object.keys(r).map((function(e){return{orderId:e,orderInfo:r[e]}}));const i=s.map(e=>{let t=[];return e.orderInfo.map(e=>t.push(e.items)),{orderId:e.orderId,paymentDate:e.orderInfo[0].paymentDate,items:t,ordererId:e.orderInfo[0].ordererId,ordererName:e.orderInfo[0].ordererName,shippingMemo:e.orderInfo[0].shippingMemo}});this.orderList=i}this.loading=!1}}},Ke=Xe,Qe=Object(m["a"])(Ke,Me,De,!1,null,null,null),Ze=Qe.exports,et={name:"Home",components:{SelectFileMailForm:ge,OrderMailForm:xe,NewOrderList:Ze},data(){return{tab:null,items:[{value:"newOrder",text:"신규주문"},{value:"single",text:"스토어 개별배송"},{value:"multiple",text:"스토어 묶음배송"},{value:"none",text:"메일만 발송"}]}}},tt=et,rt=Object(m["a"])(tt,y,I,!1,null,null,null),st=rt.exports;s["a"].use(v["a"]);const at=[{path:"/",name:"Home",component:st}],it=new v["a"]({mode:"history",base:"/vue-send-mail/",routes:at});var ot=it,lt=r("2f62");const nt=e=>He.post("/mail",e);s["a"].use(lt["a"]);var dt=new lt["a"].Store({state:{orderType:"single"},mutations:{setOrderType(e,t){e.orderType=t}},actions:{async sendMail(e,t){let r="";try{await nt(t),r="success"}catch(s){r="error"}return r},async dispatchOrder(e,t){let r="";try{await We(t),r="success"}catch(s){console.log(s),r="error"}return r},async getOrderDetail(e,t){const{data:r}=await Ue([t]);return console.log(r),r},async getOrders(e,t){const{data:r}=await Je(t),s=r.productOrderIds;let a="";return a=await Promise.all(s.map(async e=>Ue(e))),a=a.map(e=>{let t=e.data.productOption;return t=Array.isArray(e.data.productOption)?t.join():t,{productOrderId:e.data.productOrderId,itemId:e.data.productId,itemOption:t,shippingMemo:e.data.shippingMemo,ordererId:e.data.ordererId,ordererName:e.data.ordererName}}),a}}}),ct=r("f309"),ut=r("fcf4");s["a"].use(ct["a"]);var mt=new ct["a"]({theme:{themes:{light:{primary:ut["a"].grey.darken4}}}});s["a"].config.productionTip=!1,s["a"].filter("itemName",e=>{switch("string"==typeof e&&(e=Number(e)),e){case 6175018692:return"2023 심플 플래너";case 6173761992:return"2023 모던 플래너";case 7551229680:return"2023 타임라인 플래너";case 6230373650:return"2023 먼슬리&데일리 플래너";case 6183672844:return"31DAYS 플래너";case 6339448390:return"3년 5년 다이어리";case 6668700804:return"세로형 인덱스 노트";case 6711856094:return"가로형 인덱스 노트";case 6907619722:return"독서노트";case 7118280906:return"드라마노트";case 6390846551:return"먼슬리 트래커북";case 6293308097:return"180 베이직 노트";case 6498685859:return"180 체커보드 노트";case 7674508068:return"레시피북";default:return""}}),new s["a"]({router:ot,store:dt,vuetify:mt,render:e=>e(h)}).$mount("#app")},"6b67":function(e,t,r){},8330:function(e,t,r){"use strict";r("099c")}});
//# sourceMappingURL=app.4c0b8067.js.map