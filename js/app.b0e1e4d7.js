(function(e){function t(t){for(var a,s,o=t[0],n=t[1],d=t[2],m=0,u=[];m<o.length;m++)s=o[m],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&u.push(i[s][0]),i[s]=0;for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);c&&c(t);while(u.length)u.shift()();return l.push.apply(l,d||[]),r()}function r(){for(var e,t=0;t<l.length;t++){for(var r=l[t],a=!0,o=1;o<r.length;o++){var n=r[o];0!==i[n]&&(a=!1)}a&&(l.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},i={app:0},l=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vue-send-mail/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],n=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var c=n;l.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},4639:function(e,t,r){"use strict";r("6b67")},"56d7":function(e,t,r){"use strict";r.r(t);var a=r("2b0e"),i=r("7496"),l=r("62ad"),s=r("553a"),o=r("f6c4"),n=function(){var e=this,t=e._self._c;return t(i["a"],[t(o["a"],[t("router-view")],1),t(s["a"],{attrs:{padless:""}},[t(l["a"],{staticClass:"text-center text-caption grey--text",attrs:{cols:"12"}},[e._v(" © 2022 SunYoungOh. All right reserved. ")])],1)],1)},d=[],c={name:"App"},m=c,u=(r("4639"),r("2877")),p=Object(u["a"])(m,n,d,!1,null,null,null),h=p.exports,f=r("8c4f"),v=r("132d"),b=r("71a3"),g=r("c671"),I=r("fe57"),y=r("aac8"),O=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("div",{staticClass:"logo py-9 ma-auto text-center primary"},[t(v["a"],{attrs:{size:"28",color:"white"}},[e._v(" mdi-email ")]),t("h2",{staticClass:"logo-text white--text"},[e._v("SENDMAIL")])],1),t("div",{staticClass:"tabs-container"},[t(I["a"],{attrs:{ripple:!1,"background-color":"transparent",color:"primary",height:"56",centered:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(r){return t(b["a"],{key:r,attrs:{"active-class":"font-weight-bold",ripple:!1}},[e._v(" "+e._s(r)+" ")])})),1),t(y["a"],{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(g["a"],[t("SelectFileMailForm")],1),t(g["a"],[t("OrderMailForm",{attrs:{"order-type":"single"}})],1),t(g["a"],[t("OrderMailForm",{attrs:{"order-type":"multiple"}})],1)],1)],1)])},_=[],x=r("8336"),S=r("4bd4"),k=r("a844"),w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-container"},[t(S["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(x["a"],{staticClass:"mt-1 mb-4",attrs:{color:"primary",block:"",large:"",elevation:"0"},on:{click:function(t){e.dialog=!0}}},[e._v(" 상품 추가하기 ")]),t("SelectFileDialog",{attrs:{dialog:e.dialog},on:{"update:seletedItem":e.addSelectedItem,"update:dialog":t=>e.dialog=t}}),e.selectedItem?t("OrderChip",{attrs:{"order-detail":e.selectedItem}}):e._e(),t("EmailInputField",{on:{click:e.resetSendResult},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(k["a"],{attrs:{name:"comment",label:"코멘트",rows:"3",clearable:""},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),t("SendBtns",{attrs:{email:e.email,"order-detail":e.selectedItem,comment:e.comment,valid:e.valid},on:{"update:sendResult":t=>e.sendResult=t,"validate-form":e.validateForm,"reset-form":e.resetForm}})],1),""!==e.sendResult?t("ResultAlert",{attrs:{sendResult:e.sendResult}}):e._e()],1)},R=[];r("14d9");const D=[{itemId:6175018692,itemName:"2023 심플 플래너",itemOptionLabel:"컬러",itemOptions:[{label:"컬러",value:["라이트","인디핑크","스카이블루","다크"]}]},{itemId:6173761992,itemName:"2023 모던 플래너",itemOptionLabel:"컬러",itemOptions:[{label:"컬러",value:["화이트","다크"]}]},{itemId:7551229680,itemName:"2023 타임라인 플래너",itemOptions:[{label:"위클리타입",value:["스케줄","타임테이블"]}]},{itemId:6230373650,itemName:"2023 먼슬리&데일리 플래너",itemOptions:[{label:"컬러",value:["화이트","다크"]},{label:"시작요일",value:["일요일시작","월요일시작"]},{label:"데일리타입",value:["스케줄","타임테이블"]}]},{itemId:6183672844,itemName:"31DAYS 플래너",itemOptions:[{label:"컬러",value:["화이트","다크"]},{label:"데일리타입",value:["스케줄","타임테이블"]}]},{itemId:6339448390,itemName:"3년 5년 일기",itemOptions:[{label:"연도",value:["3년","5년"]},{label:"컬러",value:["화이트","다크"]}]},{itemId:7674508068,itemName:"레시피북",itemOptions:[{label:"컬러",value:["크림","올리브","토스트","차콜"]}]},{itemId:6668700804,itemName:"세로형 인덱스 노트",itemOptions:[{label:"컬러",value:["화이트","다크"]}]},{itemId:6711856094,itemName:"가로형 인덱스 노트",itemOptions:[{label:"컬러",value:["화이트","다크"]}]},{itemId:6907619722,itemName:"독서노트",itemOptions:[{label:"컬러",value:["화이트","다크"]}]},{itemId:7118280906,itemName:"드라마노트",itemOptions:[{label:"컬러",value:["화이트","다크"]}]},{itemId:6390846551,itemName:"먼슬리 트래커북",itemOptions:[{label:"컬러",value:["차콜","캔디핑크","스카이블루"]}]},{itemId:6293308097,itemName:"180 베이직 노트",itemOption:[""]},{itemId:6498685859,itemName:"180 체커보드 노트",itemOption:[""]}];var F=r("8654"),$=function(){var e=this,t=e._self._c;return t(F["a"],{ref:"email",attrs:{rules:e.emailRules,label:"이메일",hint:"아이디만 입력시 자동으로 @naver.com 가 추가됩니다.",required:"","validate-on-blur":""},on:{click:function(t){return e.$emit("resetSendResult")},blur:e.addNaverDomain},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})},M=[],N={name:"EmailInputField",data:()=>({email:"",emailRules:[e=>!!e||"이메일을 입력해주세요.",e=>/.+@.+\..+/.test(e)||"이메일 형식으로 입력해주세요"]}),methods:{addNaverDomain(){this.email&&-1==this.email.indexOf("@")&&(this.email=this.email+"@naver.com",this.$refs.email.resetValidation()),this.$emit("input",this.email)}}},j=N,C=Object(u["a"])(j,$,M,!1,null,null,null),A=C.exports,T=r("b0af"),E=r("99d9"),B=r("169a"),P=r("b974"),q=r("2fa4"),L=function(){var e=this,t=e._self._c;return t(B["a"],{attrs:{persistent:"","max-width":"400px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(T["a"],[t(E["c"],{staticClass:"pb-5"},[e._v("상품 추가하기")]),t(E["b"],[t(P["a"],{ref:"selectItem",attrs:{items:e.items,"item-text":"itemName","item-value":"itemId",rules:[e=>!!e||"상품을 선택해주세요."],label:"상품명",required:""},on:{change:e.resetSelectOption},model:{value:e.selectItem,callback:function(t){e.selectItem=t},expression:"selectItem"}}),e._l(e.options.itemOptions,(function(r,a){return t(P["a"],{key:a,ref:"itemOptions",refInFor:!0,attrs:{items:r.value,rules:[e=>!!e||"옵션을 선택해주세요."],label:r.label,required:""},model:{value:e.selectOption[a],callback:function(t){e.$set(e.selectOption,a,t)},expression:"selectOption[i]"}})}))],2),t(E["a"],[t(q["a"]),t(x["a"],{attrs:{color:"grey darken-1",text:""},on:{click:e.closeDialog}},[e._v(" 닫기 ")]),t(x["a"],{attrs:{color:"green darken-1",text:""},on:{click:e.addItem}},[e._v(" 추가하기 ")])],1)],1)],1)},z=[],Y={props:{dialog:{type:Boolean,default:!1}},data:()=>({items:D,selectItem:"",selectOption:[]}),computed:{options(){const e=this.selectItem?this.items.filter(e=>e.itemId==this.selectItem)[0]:[{itemOption:"",itemOptionLabel:"상품옵션"}];return e}},methods:{resetSelectBox(){this.selectItem="",this.selectOption=[],this.$refs.selectItem.resetValidation()},closeDialog(){this.resetSelectBox(),this.$emit("update:dialog",!1)},addItem(){this.selectItem&&this.selectOption&&this.$emit("update:seletedItem",{itemId:this.selectItem,itemOptionName:this.selectOption.join(",")}),this.resetSelectBox(),this.$emit("update:dialog",!1)},resetSelectOption(){if(this.$refs.itemOptions)for(let e=0;e<this.$refs.itemOptions.length;e++)this.$refs.itemOptions[e].reset();this.selectOption=[]}}},H=Y,J=Object(u["a"])(H,L,z,!1,null,null,null),V=J.exports,U=r("cc20"),G=function(){var e=this,t=e._self._c;return t("div",{staticClass:"order-chips mt-1 mb-4"},e._l(e.orderDetail,(function(r,a){return t(U["a"],{key:a,staticClass:"my-2 mr-2",attrs:{color:"primary",label:"",outlined:"",close:""},on:{"click:close":function(t){return e.removeItem(a)}}},[t("span",[e._v(" "+e._s(e._f("itemName")(r.itemId))+" ("+e._s(r.itemOptionName)+") ")])])})),1)},K=[],Q={props:{orderDetail:{type:Array}},data(){return{chip:!0}},methods:{removeItem(e){this.orderDetail.splice(e,1),this.$emit("update:seletedItem")}},filters:{itemName(e){switch(e){case 6175018692:return"2023 심플 플래너";case 6173761992:return"2023 모던 플래너";case 7551229680:return"2023 타임라인 플래너";case 6230373650:return"2023 먼슬리&데일리 플래너";case 6183672844:return"31DAYS 플래너";case 6339448390:return"3년 5년 일기";case 6668700804:return"세로형 인덱스 노트";case 6711856094:return"가로형 인덱스 노트";case 6907619722:return"독서노트";case 7118280906:return"드라마노트";case 6390846551:return"먼슬리 트래커북";case 6293308097:return"180 베이직 노트";case 6498685859:return"180 체커보드 노트";case 7674508068:return"레시피북";default:return""}}}},W=Q,X=Object(u["a"])(W,G,K,!1,null,null,null),Z=X.exports,ee=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mt-6 d-flex justify-space-between"},[t(x["a"],{attrs:{disabled:!e.valid||e.loading,loading:e.loading,width:"250",color:"green white--text",elevation:"0","x-large":""},on:{click:e.sendMail},scopedSlots:e._u([{key:"loader",fn:function(){return[t("span",[e._v(e._s(e.loadingText))])]},proxy:!0}])},[e._v(" 메일 보내기 ")]),t(x["a"],{attrs:{color:"grey",width:"110","x-large":"",outlined:""},on:{click:e.resetForm}},[e._v(" 모두 지우기 ")])],1)},te=[],re=(r("5b81"),{props:{orderType:{type:String,default:""},email:{type:String,default:""},orderId:{type:String,default:""},orderDetail:{type:[Object,Array],require:!0},comment:{type:String,default:""},valid:{type:Boolean,default:!0}},data(){return{loading:!1,loadingText:""}},computed:{mailData(){return{items:this.orderDetail,toEmail:this.email,comment:this.comment.replaceAll("\n","<br/>")}}},methods:{async sendMail(){if(this.$emit("update:sendResult",""),this.$emit("validate-form"),this.email&&this.orderDetail){this.loading=!0,this.loadingText="발송 중...";const e=await this.$store.dispatch("sendMail",this.mailData);if(this.orderId&&"success"==e){this.loadingText="송장 등록 중...";let e="";e=await this.$store.dispatch("dispatchOrder",this.orderId),"multiple"==this.orderType&&(e=await Promise.all(this.orderDetail.map(async e=>this.$store.dispatch("dispatchOrder",e.orderId)))),"success"==e?this.$emit("update:sendResult","success"):this.$emit("update:sendResult","error")}this.loading=!1}},resetForm(){this.$emit("reset-form"),this.$emit("update:valid",!0)}}}),ae=re,ie=Object(u["a"])(ae,ee,te,!1,null,null,null),le=ie.exports,se=r("0798"),oe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pt-6"},[t(se["a"],{attrs:{type:e.sendResult},model:{value:e.sendResult,callback:function(t){e.sendResult=t},expression:"sendResult"}},["success"==e.sendResult?t("span",[e._v(" 메일을 "),t("strong",[e._v("성공적")]),e._v("으로 보냈습니다. ")]):e._e(),"error"==e.sendResult?t("span",[e._v(" 메일 전송을 "),t("strong",[e._v("실패")]),e._v("하였습니다. ")]):e._e()])],1)},ne=[],de={props:{sendResult:{type:String,default:""}}},ce=de,me=Object(u["a"])(ce,oe,ne,!1,null,null,null),ue=me.exports,pe={name:"MailForm",components:{SelectFileDialog:V,EmailInputField:A,OrderChip:Z,SendBtns:le,ResultAlert:ue},data:()=>({dialog:!1,valid:!0,email:"",items:D,selectedItem:[],comment:"",sendResult:""}),methods:{addSelectedItem(e){this.selectedItem.push(e)},removeSelectedItem(e){console.log("removeItem",this.selectedItem.splice(e,1)),this.selectedItem=this.selectedItem.splice(e,1)},validateForm(){this.$refs.form.validate()},resetSendResult(){this.sendResult=""},resetForm(){this.resetSendResult(),this.valid=!0,this.selectedItem=[],this.email="",this.comment="",this.$refs.form.reset()}}},he=pe,fe=Object(u["a"])(he,w,R,!1,null,"655262f2",null),ve=fe.exports,be=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-container"},[t(S["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("div",{staticClass:"order-id-wrap"},[t(F["a"],{ref:"orderId",attrs:{label:e.label,rules:[e=>!!e||this.label+"를 조회해주세요."],"error-messages":e.errorMsg,required:"","validate-on-blur":""},on:{click:e.resetErrorMsg},model:{value:e.orderId,callback:function(t){e.orderId=t},expression:"orderId"}}),t(x["a"],{staticClass:"ml-4 mb-2",attrs:{width:"80",disabled:e.loading,loading:e.loading,color:"primary white--text",elevation:"0"},on:{click:e.getOrderInfo},scopedSlots:e._u([{key:"loader",fn:function(){return[t("span",[e._v("조회중...")])]},proxy:!0}])},[e._v("조회하기 ")])],1),e.orderDetail?t("OrderChip",{attrs:{"order-detail":e.orderDetail}}):e._e(),t("EmailInputField",{model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(k["a"],{attrs:{name:"comment",label:"코멘트",rows:"3",clearable:""},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),t("SendBtns",{attrs:{"order-type":e.orderType,email:e.email,"order-id":e.orderId,"order-detail":e.orderDetail,comment:e.comment,valid:e.valid},on:{"update:sendResult":t=>e.sendResult=t,"update:valid":t=>e.valid=t,"validate-form":e.validateForm,"reset-form":e.resetForm}})],1),""!==e.sendResult?t("ResultAlert",{attrs:{"send-result":e.sendResult}}):e._e()],1)},ge=[],Ie=r("cee4");function ye(){return Ie["a"].create({baseURL:"https://send-mail-server-sunyoungoh.koyeb.app"})}const Oe=ye(),_e=e=>Oe.get("/naver/orders/"+e),xe=e=>Oe.get("/naver/detail/"+e),Se=e=>Oe.post("/naver/"+e);var ke={name:"OrderMailForm",components:{EmailInputField:A,OrderChip:Z,SendBtns:le,ResultAlert:ue},props:{orderType:{type:String,default:""}},data:()=>({email:"",orderId:"",orderDetail:[],comment:"",sendResult:"",valid:!0,loading:!1,errorMsg:""}),computed:{label(){return"single"==this.orderType?"상품주문번호":"주문번호"}},methods:{resetErrorMsg(){this.errorMsg="",this.$refs.orderId.reset()},convertArrToStr(e){return Array.isArray(e)?e.join():e},async getOrderInfo(){if(this.resetSendResult(),this.orderId){this.loading=!0;try{if("single"==this.orderType){const{data:e}=await xe(this.orderId);this.orderDetail=[{itemId:e.productId,itemOptionName:this.convertArrToStr(e.productOption)}]}else{const{data:e}=await _e(this.orderId),t=e.productOrderIds;this.orderDetail=await Promise.all(t.map(async e=>xe(e))),this.orderDetail=this.orderDetail.map(t=>({orderId:e.productOrderId,itemId:t.data.productId,itemOptionName:this.convertArrToStr(t.data.productOption)}))}}catch(e){400==e.response.status&&(this.errorMsg=e.response.data,this.orderDetail=[])}finally{this.loading=!1}}else this.errorMsg=this.label+"를 조회해주세요."},validateForm(){this.$refs.form.validate()},resetSendResult(){this.sendResult=""},resetForm(){this.resetErrorMsg(),this.resetSendResult(),this.valid=!0,this.orderId="",this.orderDetail=[],this.email="",this.comment="",this.$refs.form.reset()}}},we=ke,Re=Object(u["a"])(we,be,ge,!1,null,"5606b21b",null),De=Re.exports,Fe={name:"Home",components:{SelectFileMailForm:ve,OrderMailForm:De},data(){return{tab:null,items:["메일만 발송","스토어 개별배송","스토어 묶음배송"]}}},$e=Fe,Me=Object(u["a"])($e,O,_,!1,null,null,null),Ne=Me.exports;a["a"].use(f["a"]);const je=[{path:"/",name:"Home",component:Ne}],Ce=new f["a"]({mode:"history",base:"/vue-send-mail/",routes:je});var Ae=Ce,Te=r("2f62");const Ee=e=>Oe.post("/mail",e);a["a"].use(Te["a"]);var Be=new Te["a"].Store({actions:{async sendMail(e,t){let r="";try{await Ee(t),r="success"}catch(a){r="error"}return r},async dispatchOrder(e,t){let r="";try{await Se(t),r="success"}catch(a){r="error"}return r}}}),Pe=r("f309"),qe=r("fcf4");a["a"].use(Pe["a"]);var Le=new Pe["a"]({theme:{themes:{light:{primary:qe["a"].grey.darken4}}}});a["a"].config.productionTip=!1,new a["a"]({router:Ae,store:Be,vuetify:Le,render:e=>e(h)}).$mount("#app")},"6b67":function(e,t,r){}});
//# sourceMappingURL=app.b0e1e4d7.js.map